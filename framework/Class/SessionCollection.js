const a66_0x155132=a66_0x4eb3;(function(_0xf7f36a,_0xac210){const _0x455ec0=a66_0x4eb3,_0x1adce7=_0xf7f36a();while(!![]){try{const _0x2e85dd=-parseInt(_0x455ec0(0xc4))/0x1*(-parseInt(_0x455ec0(0xd9))/0x2)+parseInt(_0x455ec0(0xd4))/0x3+-parseInt(_0x455ec0(0xdc))/0x4*(-parseInt(_0x455ec0(0xcc))/0x5)+parseInt(_0x455ec0(0xc2))/0x6+-parseInt(_0x455ec0(0xc3))/0x7*(parseInt(_0x455ec0(0xc6))/0x8)+-parseInt(_0x455ec0(0xd8))/0x9+-parseInt(_0x455ec0(0xc7))/0xa*(parseInt(_0x455ec0(0xd0))/0xb);if(_0x2e85dd===_0xac210)break;else _0x1adce7['push'](_0x1adce7['shift']());}catch(_0x56d146){_0x1adce7['push'](_0x1adce7['shift']());}}}(a66_0x5e71,0x43df6));function a66_0x5e71(){const _0x44e93e=['Bg9HzhneB2nZ','zxHWB3j0CW','C2vZC2LVBKfWAq','z2v0u2vZC2LVBG','nvvAvfDQBq','ywrKu2vZC2LVBG','Dg9tDhjPBMC','zM91BMq','odi3mdLyuKn1B0O','Ahr0Chm6lY96B2TVDs1ZzxnZAw9UlwfWAs52zxjJzwWUyxbW','C2HVDwXKuMvSB2fKu2vZC2LVBG','p3jLBw92zt10CNvL','mJmZmda0z0f4uKzT','lI4VlI4VyMrKl3nLC3nPB24','kcGOlISPkYKRksSK','zgf0yq','oteYmJrTrvbmuxe','mJGZmKHutxLOuW','y29UC3rYDwn0B3i','Ag9RB0y','nZC3nJKYq2vhAgHN','mtG1otiZmKnJs0rOua','n2XgvfPhuq','mJq0q0fdAKjg','yxHPB3m','mJCWoduYmenzA0zHvq','ndaWCuf4wNLc'];a66_0x5e71=function(){return _0x44e93e;};return a66_0x5e71();}const a66_0x349700=(function(){let _0x5e67eb=!![];return function(_0x2e2cb6,_0x17d64d){const _0x5bc2a9=_0x5e67eb?function(){if(_0x17d64d){const _0x4eed9b=_0x17d64d['apply'](_0x2e2cb6,arguments);return _0x17d64d=null,_0x4eed9b;}}:function(){};return _0x5e67eb=![],_0x5bc2a9;};}()),a66_0x1fcc4d=a66_0x349700(this,function(){const _0x526a13=a66_0x4eb3,_0x3dc29d={'BJeDY':_0x526a13(0xd6)};return a66_0x1fcc4d[_0x526a13(0xce)]()['search'](_0x3dc29d['BJeDY'])[_0x526a13(0xce)]()[_0x526a13(0xda)](a66_0x1fcc4d)['search'](_0x3dc29d['BJeDY']);});function a66_0x4eb3(_0x58ab41,_0x262bab){const _0x3b688b=a66_0x5e71();return a66_0x4eb3=function(_0x1fcc4d,_0x349700){_0x1fcc4d=_0x1fcc4d-0xc2;let _0x5e7150=_0x3b688b[_0x1fcc4d];if(a66_0x4eb3['jRvrZx']===undefined){var _0x4eb380=function(_0x4f4281){const _0x3ed42f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xeeebbd='',_0x547c7a='',_0x36e951=_0xeeebbd+_0x4eb380;for(let _0x951664=0x0,_0x14632e,_0x21f48c,_0x595e7d=0x0;_0x21f48c=_0x4f4281['charAt'](_0x595e7d++);~_0x21f48c&&(_0x14632e=_0x951664%0x4?_0x14632e*0x40+_0x21f48c:_0x21f48c,_0x951664++%0x4)?_0xeeebbd+=_0x36e951['charCodeAt'](_0x595e7d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x14632e>>(-0x2*_0x951664&0x6)):_0x951664:0x0){_0x21f48c=_0x3ed42f['indexOf'](_0x21f48c);}for(let _0x3f096d=0x0,_0x386bc3=_0xeeebbd['length'];_0x3f096d<_0x386bc3;_0x3f096d++){_0x547c7a+='%'+('00'+_0xeeebbd['charCodeAt'](_0x3f096d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x547c7a);};a66_0x4eb3['gwgDAu']=_0x4eb380,_0x58ab41=arguments,a66_0x4eb3['jRvrZx']=!![];}const _0x2818f0=_0x3b688b[0x0],_0x22bb3d=_0x1fcc4d+_0x2818f0,_0xa11edd=_0x58ab41[_0x22bb3d];if(!_0xa11edd){const _0x198652=function(_0x15a87f){this['bBVjSK']=_0x15a87f,this['ZmHKRH']=[0x1,0x0,0x0],this['gGJVep']=function(){return'newState';},this['PQWedm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qHKZWl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x198652['prototype']['TSATTV']=function(){const _0x4c1e35=new RegExp(this['PQWedm']+this['qHKZWl']),_0x2dc3c9=_0x4c1e35['test'](this['gGJVep']['toString']())?--this['ZmHKRH'][0x1]:--this['ZmHKRH'][0x0];return this['LuQThz'](_0x2dc3c9);},_0x198652['prototype']['LuQThz']=function(_0x1d8e27){if(!Boolean(~_0x1d8e27))return _0x1d8e27;return this['FFESOc'](this['bBVjSK']);},_0x198652['prototype']['FFESOc']=function(_0x27a3a4){for(let _0x68eddd=0x0,_0x3557a8=this['ZmHKRH']['length'];_0x68eddd<_0x3557a8;_0x68eddd++){this['ZmHKRH']['push'](Math['round'](Math['random']())),_0x3557a8=this['ZmHKRH']['length'];}return _0x27a3a4(this['ZmHKRH'][0x0]);},new _0x198652(a66_0x4eb3)['TSATTV'](),_0x5e7150=a66_0x4eb3['gwgDAu'](_0x5e7150),_0x58ab41[_0x22bb3d]=_0x5e7150;}else _0x5e7150=_0xa11edd;return _0x5e7150;},a66_0x4eb3(_0x58ab41,_0x262bab);}a66_0x1fcc4d();const sessionDb=require(a66_0x155132(0xd5)),authDb=require('../../bdd/auth'),axios=require(a66_0x155132(0xc5));class SessionManager{['sessionApi']=a66_0x155132(0xd1);#userId=null;#shouldReloadSession=![];#userSession=null;constructor(_0x4edfa4,_0x5df613=null){const _0x5861c7=a66_0x155132,_0x1decd7={'hokoF':function(_0x44dc05,_0x1b4b1b){return _0x44dc05==_0x1b4b1b;}};this.#userId=_0x4edfa4,this.#userSession=_0x5df613;const _0x1402c5=sessionDb[_0x5861c7(0xcb)](this.#userId);if(!_0x1402c5){sessionDb['addSession'](_0x4edfa4,this.#userSession);if(_0x5df613)this.#shouldReloadSession=!![];return;}if(_0x1decd7[_0x5861c7(0xdb)](_0x1402c5?.['id'],this.#userSession)){if(_0x5df613==null)return;return this.#checkIfShouldReconnect();}authDb['removeDocsFromId'](this.#userId),sessionDb[_0x5861c7(0xcd)](this.#userId,this.#userSession),this.#shouldReloadSession=!![];}async['fetchForDocs'](_0x558363){const _0x4f08f9=a66_0x155132,_0x26eb83=await axios['get'](this[_0x4f08f9(0xca)]+'/session/'+_0x558363+_0x4f08f9(0xd3));if(_0x26eb83?.[_0x4f08f9(0xd7)]?.[_0x4f08f9(0xcf)])return _0x26eb83['data']['documents'];else throw new Error();}get[a66_0x155132(0xd2)](){return this.#shouldReloadSession;}async['reloadSession'](){const _0x58a63c=a66_0x155132,_0x3b2e13=await this['fetchForDocs'](this.#userSession);authDb[_0x58a63c(0xc8)](this.#userId,_0x3b2e13);}#checkIfShouldReconnect(){return this.#shouldReloadSession=!authDb['hasCreds'](this.#userId);}}module[a66_0x155132(0xc9)]=SessionManager;